{"ast":null,"code":"import{Button,createTheme,Grid,ThemeProvider,Typography,Box,TextField}from'@material-ui/core';import useMediaQuery from'@material-ui/core/useMediaQuery';import{useMemo,useState}from'react';import'./App.css';import image from\"./backgroundImage.jpg\";// Define the shape of the manga and chapter data\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const prefersDarkMode=useMediaQuery('(prefers-color-scheme: dark)');const[searchQuery,setSearchQuery]=useState('');// Input for manga search\nconst[mangaResults,setMangaResults]=useState([]);// List of manga search results\nconst[selectedManga,setSelectedManga]=useState(null);// Selected manga URL\nconst[chapterInfo,setChapterInfo]=useState([]);// Fetched chapter info\nconst[error,setError]=useState(null);const[showResults,setShowResults]=useState(true);// State to control visibility of results\n// Handle manga search\nconst handleSearch=()=>{if(searchQuery){fetch(\"http://localhost:8000/search\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({mangaName:searchQuery})}).then(res=>res.json()).then(data=>{setShowResults(true);setMangaResults(data.results||[]);// Assuming the backend returns an array of search results\nsetError(null);}).catch(err=>{console.error(\"Error searching for manga:\",err);setError(\"Failed to search for manga.\");});}};// Handle manga selection and chapter scraping\nconst handleMangaSelection=link=>{const fullUrl=`https://mangafire.to${link}`;setSelectedManga(fullUrl);//console.log(url);\nfetch(\"http://localhost:8000/message\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({mangaUrl:fullUrl})// Send the selected manga URL to scrape chapters\n}).then(res=>res.json()).then(data=>{setShowResults(false);setChapterInfo(data.message||[]);}).catch(err=>{console.error(\"Error fetching chapters:\",err);setError(\"Failed to fetch chapters.\");});};// Theme setup for dark and light modes\nconst theme=useMemo(()=>createTheme({palette:{type:prefersDarkMode?'dark':'light'},typography:{h1:{fontSize:16,fontWeight:400},body1:{fontFamily:'monospace',fontSize:18}}}),[prefersDarkMode]);return/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsxs(Box,{component:\"main\",padding:2,display:\"flex\",style:{backgroundImage:`url(${image})`},className:\"background\",children:[\" \",/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",justifyContent:\"center\",alignItems:\"center\",spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h1\",children:\"Manga Search\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(TextField,{multiline:true,inputProps:{style:{color:\"black\"}},label:\"Search Manga\",variant:\"outlined\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(Button,{onClick:handleSearch,variant:\"contained\",color:\"primary\",style:{marginTop:'10px'},children:\"Search\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,children:showResults&&mangaResults.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Search Results:\"}),mangaResults.map((manga,index)=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[manga.image?/*#__PURE__*/_jsx(\"img\",{src:manga.image,alt:manga.title,style:{width:'200px'}}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Image not available\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:\"container\",children:/*#__PURE__*/_jsx(Button,{className:\"button\",onClick:()=>{handleMangaSelection(manga.link);},variant:\"contained\",color:\"secondary\",style:{marginLeft:'10px'},children:manga.title})})]},index)}))]}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No manga found\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:!showResults&&selectedManga&&chapterInfo.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Chapters:\"}),chapterInfo.map((chapter,index)=>/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[chapter.chapterInfo,\" - \",/*#__PURE__*/_jsx(\"a\",{href:`https://mangafire.to${chapter.chapterLink}`,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Read\"})]},index))]}):selectedManga?/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No chapters found for the selected manga\"}):null}),error&&/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})})]})]})});}export default App;","map":{"version":3,"names":["Button","createTheme","Grid","ThemeProvider","Typography","Box","TextField","useMediaQuery","useMemo","useState","image","jsx","_jsx","jsxs","_jsxs","App","prefersDarkMode","searchQuery","setSearchQuery","mangaResults","setMangaResults","selectedManga","setSelectedManga","chapterInfo","setChapterInfo","error","setError","showResults","setShowResults","handleSearch","fetch","method","headers","body","JSON","stringify","mangaName","then","res","json","data","results","catch","err","console","handleMangaSelection","link","fullUrl","mangaUrl","message","theme","palette","type","typography","h1","fontSize","fontWeight","body1","fontFamily","children","component","padding","display","style","backgroundImage","className","container","direction","justifyContent","alignItems","spacing","item","variant","multiline","inputProps","color","label","value","onChange","e","target","onClick","marginTop","length","map","manga","index","src","alt","title","width","marginLeft","chapter","href","chapterLink","rel"],"sources":["C:/Users/Iliya/Desktop/Projects/React-Chapter-Updater/chapupdater-extension/src/App.tsx"],"sourcesContent":["import { Button, createTheme, Grid, ThemeProvider, Typography, Box, TextField } from '@material-ui/core';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useMemo, useState, useEffect } from 'react';\nimport './App.css';\nimport image from \"./backgroundImage.jpg\";\n\n// Define the shape of the manga and chapter data\ninterface Manga {\n  image: string;\n  link: string;\n  title: string;\n}\n\ninterface Chapter {\n  chapterInfo: string;\n  chapterLink: string;\n}\n\nfunction App() {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const [searchQuery, setSearchQuery] = useState<string>(''); // Input for manga search\n  const [mangaResults, setMangaResults] = useState<Manga[]>([]); // List of manga search results\n  const [selectedManga, setSelectedManga] = useState<string | null>(null); // Selected manga URL\n  const [chapterInfo, setChapterInfo] = useState<Chapter[]>([]); // Fetched chapter info\n  const [error, setError] = useState<string | null>(null);\n  const [showResults, setShowResults] = useState(true); // State to control visibility of results\n\n  // Handle manga search\n  const handleSearch = () => {\n    if (searchQuery) {\n      fetch(\"http://localhost:8000/search\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ mangaName: searchQuery }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setShowResults(true);\n          setMangaResults(data.results || []); // Assuming the backend returns an array of search results\n          setError(null);\n        })\n        .catch((err) => {\n          console.error(\"Error searching for manga:\", err);\n          setError(\"Failed to search for manga.\");\n        });\n    }\n  };\n\n  // Handle manga selection and chapter scraping\n  const handleMangaSelection = (link:string) => {\n    const fullUrl = `https://mangafire.to${link}`;\n    setSelectedManga(fullUrl);\n    //console.log(url);\n    fetch(\"http://localhost:8000/message\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ mangaUrl: fullUrl }), // Send the selected manga URL to scrape chapters\n    })\n      .then((res) => res.json())\n      .then((data) =>  { setShowResults(false); setChapterInfo(data.message || [])  } )\n      .catch((err) => {\n        console.error(\"Error fetching chapters:\", err);\n        setError(\"Failed to fetch chapters.\");\n      });\n  };\n\n  // Theme setup for dark and light modes\n  const theme = useMemo(\n    () =>\n      createTheme({\n        palette: {\n          type: prefersDarkMode ? 'dark' : 'light',\n        },\n        typography: {\n          h1: {\n            fontSize: 16,\n            fontWeight: 400,\n          },\n          body1: {\n            fontFamily: 'monospace',\n            fontSize: 18,\n          },\n        },\n      }),\n    [prefersDarkMode]\n  );\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Box component='main' padding={2} display='flex' style={{backgroundImage: `url(${image})`}} className = \"background\"> {/*Need to work on background, maybe dont put it here */}\n        <Grid container direction='column' justifyContent='center' alignItems='center' spacing={2}>\n          <Grid item>\n            <Typography variant='h1'>Manga Search</Typography>\n          </Grid>\n\n          <Grid item>\n            <TextField\n            multiline inputProps={{ style: { color: \"black\" } }}\n              label=\"Search Manga\"\n              variant=\"outlined\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n            <Button onClick={handleSearch} variant=\"contained\" color=\"primary\" style={{ marginTop: '10px' }}>\n              Search\n            </Button>\n          </Grid>\n\n          {/* Show manga search results */}\n          <Grid item>\n            {showResults && mangaResults.length > 0 ? (\n              <div>\n                <Typography variant='h2'>Search Results:</Typography>\n                {mangaResults.map((manga, index) => (\n                  <div >\n                    <div className=\"container\" key={index} >\n                        {manga.image ? (\n                          <img src={manga.image} alt={manga.title} style={{ width: '200px' }} />\n                        ) : (\n                          <Typography variant=\"body1\">Image not available</Typography>\n                         )}\n                    <Typography variant='body1' className = \"container\">\n                      <Button className=\"button\" onClick={() =>  {handleMangaSelection(manga.link)}} variant='contained' color='secondary' style={{ marginLeft: '10px' }}>\n                        {manga.title}\n                      </Button>\n                    </Typography>\n                  </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <Typography variant='body1'>No manga found</Typography>\n            )}\n          </Grid>\n\n          {/* Show selected manga's chapter information */}\n          <Grid item>\n            {!showResults && selectedManga && chapterInfo.length > 0 ? (\n              <div>\n                <Typography variant='h2'>Chapters:</Typography>\n                {chapterInfo.map((chapter, index) => (\n                  <Typography key={index} variant='body1'>\n                    {chapter.chapterInfo} - <a href={`https://mangafire.to${chapter.chapterLink}`} target=\"_blank\" rel=\"noopener noreferrer\">Read</a>\n                  </Typography>\n                ))}\n              </div>\n            ) : selectedManga ? (\n              <Typography variant='body1'>No chapters found for the selected manga</Typography>\n            ) : null}\n          </Grid>\n\n          {/* Show error if any */}\n          {error && (\n            <Grid item>\n              <Typography color=\"error\">{error}</Typography>\n            </Grid>\n          )}\n        </Grid>\n      </Box>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,OAASA,MAAM,CAAEC,WAAW,CAAEC,IAAI,CAAEC,aAAa,CAAEC,UAAU,CAAEC,GAAG,CAAEC,SAAS,KAAQ,mBAAmB,CACxG,MAAO,CAAAC,aAAa,KAAM,iCAAiC,CAC3D,OAASC,OAAO,CAAEC,QAAQ,KAAmB,OAAO,CACpD,MAAO,WAAW,CAClB,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CAEzC;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAYA,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAAAC,eAAe,CAAGT,aAAa,CAAC,8BAA8B,CAAC,CACrE,KAAM,CAACU,WAAW,CAAEC,cAAc,CAAC,CAAGT,QAAQ,CAAS,EAAE,CAAC,CAAE;AAC5D,KAAM,CAACU,YAAY,CAAEC,eAAe,CAAC,CAAGX,QAAQ,CAAU,EAAE,CAAC,CAAE;AAC/D,KAAM,CAACY,aAAa,CAAEC,gBAAgB,CAAC,CAAGb,QAAQ,CAAgB,IAAI,CAAC,CAAE;AACzE,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAY,EAAE,CAAC,CAAE;AAC/D,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAEtD;AACA,KAAM,CAAAoB,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAIZ,WAAW,CAAE,CACfa,KAAK,CAAC,8BAA8B,CAAE,CACpCC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,SAAS,CAAEnB,WAAY,CAAC,CACjD,CAAC,CAAC,CACCoB,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACdZ,cAAc,CAAC,IAAI,CAAC,CACpBR,eAAe,CAACoB,IAAI,CAACC,OAAO,EAAI,EAAE,CAAC,CAAE;AACrCf,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAC,CAAC,CACDgB,KAAK,CAAEC,GAAG,EAAK,CACdC,OAAO,CAACnB,KAAK,CAAC,4BAA4B,CAAEkB,GAAG,CAAC,CAChDjB,QAAQ,CAAC,6BAA6B,CAAC,CACzC,CAAC,CAAC,CACN,CACF,CAAC,CAED;AACA,KAAM,CAAAmB,oBAAoB,CAAIC,IAAW,EAAK,CAC5C,KAAM,CAAAC,OAAO,CAAG,uBAAuBD,IAAI,EAAE,CAC7CxB,gBAAgB,CAACyB,OAAO,CAAC,CACzB;AACAjB,KAAK,CAAC,+BAA+B,CAAE,CACrCC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEa,QAAQ,CAAED,OAAQ,CAAC,CAAG;AAC/C,CAAC,CAAC,CACCV,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAM,CAAEZ,cAAc,CAAC,KAAK,CAAC,CAAEJ,cAAc,CAACgB,IAAI,CAACS,OAAO,EAAI,EAAE,CAAC,CAAE,CAAE,CAAC,CAChFP,KAAK,CAAEC,GAAG,EAAK,CACdC,OAAO,CAACnB,KAAK,CAAC,0BAA0B,CAAEkB,GAAG,CAAC,CAC9CjB,QAAQ,CAAC,2BAA2B,CAAC,CACvC,CAAC,CAAC,CACN,CAAC,CAED;AACA,KAAM,CAAAwB,KAAK,CAAG1C,OAAO,CACnB,IACEP,WAAW,CAAC,CACVkD,OAAO,CAAE,CACPC,IAAI,CAAEpC,eAAe,CAAG,MAAM,CAAG,OACnC,CAAC,CACDqC,UAAU,CAAE,CACVC,EAAE,CAAE,CACFC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,GACd,CAAC,CACDC,KAAK,CAAE,CACLC,UAAU,CAAE,WAAW,CACvBH,QAAQ,CAAE,EACZ,CACF,CACF,CAAC,CAAC,CACJ,CAACvC,eAAe,CAClB,CAAC,CAED,mBACEJ,IAAA,CAACT,aAAa,EAAC+C,KAAK,CAAEA,KAAM,CAAAS,QAAA,cAC1B7C,KAAA,CAACT,GAAG,EAACuD,SAAS,CAAC,MAAM,CAACC,OAAO,CAAE,CAAE,CAACC,OAAO,CAAC,MAAM,CAACC,KAAK,CAAE,CAACC,eAAe,CAAE,OAAOtD,KAAK,GAAG,CAAE,CAACuD,SAAS,CAAG,YAAY,CAAAN,QAAA,EAAC,GAAC,cACpH7C,KAAA,CAACZ,IAAI,EAACgE,SAAS,MAACC,SAAS,CAAC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAACC,UAAU,CAAC,QAAQ,CAACC,OAAO,CAAE,CAAE,CAAAX,QAAA,eACxF/C,IAAA,CAACV,IAAI,EAACqE,IAAI,MAAAZ,QAAA,cACR/C,IAAA,CAACR,UAAU,EAACoE,OAAO,CAAC,IAAI,CAAAb,QAAA,CAAC,cAAY,CAAY,CAAC,CAC9C,CAAC,cAEP7C,KAAA,CAACZ,IAAI,EAACqE,IAAI,MAAAZ,QAAA,eACR/C,IAAA,CAACN,SAAS,EACVmE,SAAS,MAACC,UAAU,CAAE,CAAEX,KAAK,CAAE,CAAEY,KAAK,CAAE,OAAQ,CAAE,CAAE,CAClDC,KAAK,CAAC,cAAc,CACpBJ,OAAO,CAAC,UAAU,CAClBK,KAAK,CAAE5D,WAAY,CACnB6D,QAAQ,CAAGC,CAAC,EAAK7D,cAAc,CAAC6D,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACjD,CAAC,cACFjE,IAAA,CAACZ,MAAM,EAACiF,OAAO,CAAEpD,YAAa,CAAC2C,OAAO,CAAC,WAAW,CAACG,KAAK,CAAC,SAAS,CAACZ,KAAK,CAAE,CAAEmB,SAAS,CAAE,MAAO,CAAE,CAAAvB,QAAA,CAAC,QAEjG,CAAQ,CAAC,EACL,CAAC,cAGP/C,IAAA,CAACV,IAAI,EAACqE,IAAI,MAAAZ,QAAA,CACPhC,WAAW,EAAIR,YAAY,CAACgE,MAAM,CAAG,CAAC,cACrCrE,KAAA,QAAA6C,QAAA,eACE/C,IAAA,CAACR,UAAU,EAACoE,OAAO,CAAC,IAAI,CAAAb,QAAA,CAAC,iBAAe,CAAY,CAAC,CACpDxC,YAAY,CAACiE,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBAC7B1E,IAAA,QAAA+C,QAAA,cACE7C,KAAA,QAAKmD,SAAS,CAAC,WAAW,CAAAN,QAAA,EACrB0B,KAAK,CAAC3E,KAAK,cACVE,IAAA,QAAK2E,GAAG,CAAEF,KAAK,CAAC3E,KAAM,CAAC8E,GAAG,CAAEH,KAAK,CAACI,KAAM,CAAC1B,KAAK,CAAE,CAAE2B,KAAK,CAAE,OAAQ,CAAE,CAAE,CAAC,cAEtE9E,IAAA,CAACR,UAAU,EAACoE,OAAO,CAAC,OAAO,CAAAb,QAAA,CAAC,qBAAmB,CAAY,CAC3D,cACN/C,IAAA,CAACR,UAAU,EAACoE,OAAO,CAAC,OAAO,CAACP,SAAS,CAAG,WAAW,CAAAN,QAAA,cACjD/C,IAAA,CAACZ,MAAM,EAACiE,SAAS,CAAC,QAAQ,CAACgB,OAAO,CAAEA,CAAA,GAAO,CAACpC,oBAAoB,CAACwC,KAAK,CAACvC,IAAI,CAAC,EAAE,CAAC0B,OAAO,CAAC,WAAW,CAACG,KAAK,CAAC,WAAW,CAACZ,KAAK,CAAE,CAAE4B,UAAU,CAAE,MAAO,CAAE,CAAAhC,QAAA,CAChJ0B,KAAK,CAACI,KAAK,CACN,CAAC,CACC,CAAC,GAVmBH,KAW7B,CAAC,CACD,CACN,CAAC,EACC,CAAC,cAEN1E,IAAA,CAACR,UAAU,EAACoE,OAAO,CAAC,OAAO,CAAAb,QAAA,CAAC,gBAAc,CAAY,CACvD,CACG,CAAC,cAGP/C,IAAA,CAACV,IAAI,EAACqE,IAAI,MAAAZ,QAAA,CACP,CAAChC,WAAW,EAAIN,aAAa,EAAIE,WAAW,CAAC4D,MAAM,CAAG,CAAC,cACtDrE,KAAA,QAAA6C,QAAA,eACE/C,IAAA,CAACR,UAAU,EAACoE,OAAO,CAAC,IAAI,CAAAb,QAAA,CAAC,WAAS,CAAY,CAAC,CAC9CpC,WAAW,CAAC6D,GAAG,CAAC,CAACQ,OAAO,CAAEN,KAAK,gBAC9BxE,KAAA,CAACV,UAAU,EAAaoE,OAAO,CAAC,OAAO,CAAAb,QAAA,EACpCiC,OAAO,CAACrE,WAAW,CAAC,KAAG,cAAAX,IAAA,MAAGiF,IAAI,CAAE,uBAAuBD,OAAO,CAACE,WAAW,EAAG,CAACd,MAAM,CAAC,QAAQ,CAACe,GAAG,CAAC,qBAAqB,CAAApC,QAAA,CAAC,MAAI,CAAG,CAAC,GADlH2B,KAEL,CACb,CAAC,EACC,CAAC,CACJjE,aAAa,cACfT,IAAA,CAACR,UAAU,EAACoE,OAAO,CAAC,OAAO,CAAAb,QAAA,CAAC,0CAAwC,CAAY,CAAC,CAC/E,IAAI,CACJ,CAAC,CAGNlC,KAAK,eACJb,IAAA,CAACV,IAAI,EAACqE,IAAI,MAAAZ,QAAA,cACR/C,IAAA,CAACR,UAAU,EAACuE,KAAK,CAAC,OAAO,CAAAhB,QAAA,CAAElC,KAAK,CAAa,CAAC,CAC1C,CACP,EACG,CAAC,EACJ,CAAC,CACO,CAAC,CAEpB,CAEA,cAAe,CAAAV,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}