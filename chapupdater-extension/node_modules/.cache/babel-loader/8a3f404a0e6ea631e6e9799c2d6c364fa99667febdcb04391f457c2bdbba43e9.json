{"ast":null,"code":"import{Button,createTheme,Grid,ThemeProvider,Typography,Box,TextField}from'@material-ui/core';import useMediaQuery from'@material-ui/core/useMediaQuery';import{useMemo,useState}from'react';// Define the shape of the manga and chapter data\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const prefersDarkMode=useMediaQuery('(prefers-color-scheme: dark)');const[searchQuery,setSearchQuery]=useState('');// Input for manga search\nconst[mangaResults,setMangaResults]=useState([]);// List of manga search results\nconst[selectedManga,setSelectedManga]=useState(null);// Selected manga URL\nconst[chapterInfo,setChapterInfo]=useState([]);// Fetched chapter info\nconst[error,setError]=useState(null);const[showResults,setShowResults]=useState(true);// State to control visibility of results\n// Handle manga search\nconst handleSearch=()=>{if(searchQuery){fetch(\"http://localhost:8000/search\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({mangaName:searchQuery})}).then(res=>res.json()).then(data=>{setMangaResults(data.results||[]);// Assuming the backend returns an array of search results\nsetError(null);}).catch(err=>{console.error(\"Error searching for manga:\",err);setError(\"Failed to search for manga.\");});}};// Handle manga selection and chapter scraping\nconst handleMangaSelection=link=>{const fullUrl=`https://mangafire.to${link}`;setSelectedManga(fullUrl);//console.log(url);\nfetch(\"http://localhost:8000/message\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({mangaUrl:fullUrl})// Send the selected manga URL to scrape chapters\n}).then(res=>res.json()).then(data=>{setShowResults(false);setChapterInfo(data.message||[]);}).catch(err=>{console.error(\"Error fetching chapters:\",err);setError(\"Failed to fetch chapters.\");});};// Theme setup for dark and light modes\nconst theme=useMemo(()=>createTheme({palette:{type:prefersDarkMode?'dark':'light'},typography:{h1:{fontSize:16,fontWeight:400},body1:{fontFamily:'monospace',fontSize:18}}}),[prefersDarkMode]);return/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsx(Box,{component:\"main\",padding:2,display:\"flex\",children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",justifyContent:\"center\",alignItems:\"center\",spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h1\",children:\"Manga Search\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(TextField,{multiline:true,inputProps:{style:{color:\"black\"}},label:\"Search Manga\",variant:\"outlined\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(Button,{onClick:handleSearch,variant:\"contained\",color:\"primary\",style:{marginTop:'10px'},children:\"Search\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,children:showResults&&mangaResults.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Search Results:\"}),mangaResults.map((manga,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[manga.image?/*#__PURE__*/_jsx(\"img\",{src:manga.image,style:{width:'200px'}}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Image not available\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:/*#__PURE__*/_jsx(Button,{onClick:()=>{console.log(mangaResults);handleMangaSelection(manga.link);},variant:\"contained\",color:\"secondary\",style:{marginLeft:'10px'},children:\"Select\"})})]},index))]}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No manga found\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:selectedManga&&chapterInfo.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Chapters:\"}),chapterInfo.map((chapter,index)=>/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[chapter.chapterInfo,\" - \",/*#__PURE__*/_jsx(\"a\",{href:`https://mangafire.to${chapter.chapterLink}`,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Read\"})]},index))]}):selectedManga?/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No chapters found for the selected manga\"}):null}),error&&/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})})]})})});}export default App;","map":{"version":3,"names":["Button","createTheme","Grid","ThemeProvider","Typography","Box","TextField","useMediaQuery","useMemo","useState","jsx","_jsx","jsxs","_jsxs","App","prefersDarkMode","searchQuery","setSearchQuery","mangaResults","setMangaResults","selectedManga","setSelectedManga","chapterInfo","setChapterInfo","error","setError","showResults","setShowResults","handleSearch","fetch","method","headers","body","JSON","stringify","mangaName","then","res","json","data","results","catch","err","console","handleMangaSelection","link","fullUrl","mangaUrl","message","theme","palette","type","typography","h1","fontSize","fontWeight","body1","fontFamily","children","component","padding","display","container","direction","justifyContent","alignItems","spacing","item","variant","multiline","inputProps","style","color","label","value","onChange","e","target","onClick","marginTop","length","map","manga","index","image","src","width","log","marginLeft","chapter","href","chapterLink","rel"],"sources":["C:/Users/Iliya/Desktop/Projects/React-Chapter-Updater/chapupdater-extension/src/App.tsx"],"sourcesContent":["import { Button, createTheme, Grid, ThemeProvider, Typography, Box, TextField } from '@material-ui/core';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useMemo, useState, useEffect } from 'react';\n\n// Define the shape of the manga and chapter data\ninterface Manga {\n  image: string;\n  link: string;\n}\n\ninterface Chapter {\n  chapterInfo: string;\n  chapterLink: string;\n}\n\nfunction App() {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const [searchQuery, setSearchQuery] = useState<string>(''); // Input for manga search\n  const [mangaResults, setMangaResults] = useState<Manga[]>([]); // List of manga search results\n  const [selectedManga, setSelectedManga] = useState<string | null>(null); // Selected manga URL\n  const [chapterInfo, setChapterInfo] = useState<Chapter[]>([]); // Fetched chapter info\n  const [error, setError] = useState<string | null>(null);\n  const [showResults, setShowResults] = useState(true); // State to control visibility of results\n\n  // Handle manga search\n  const handleSearch = () => {\n    if (searchQuery) {\n      fetch(\"http://localhost:8000/search\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ mangaName: searchQuery }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setMangaResults(data.results || []); // Assuming the backend returns an array of search results\n          setError(null);\n        })\n        .catch((err) => {\n          console.error(\"Error searching for manga:\", err);\n          setError(\"Failed to search for manga.\");\n        });\n    }\n  };\n\n  // Handle manga selection and chapter scraping\n  const handleMangaSelection = (link:string) => {\n    const fullUrl = `https://mangafire.to${link}`;\n    setSelectedManga(fullUrl);\n    //console.log(url);\n    fetch(\"http://localhost:8000/message\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ mangaUrl: fullUrl }), // Send the selected manga URL to scrape chapters\n    })\n      .then((res) => res.json())\n      .then((data) =>  { setShowResults(false); setChapterInfo(data.message || [])  } )\n      .catch((err) => {\n        console.error(\"Error fetching chapters:\", err);\n        setError(\"Failed to fetch chapters.\");\n      });\n  };\n\n  // Theme setup for dark and light modes\n  const theme = useMemo(\n    () =>\n      createTheme({\n        palette: {\n          type: prefersDarkMode ? 'dark' : 'light',\n        },\n        typography: {\n          h1: {\n            fontSize: 16,\n            fontWeight: 400,\n          },\n          body1: {\n            fontFamily: 'monospace',\n            fontSize: 18,\n          },\n        },\n      }),\n    [prefersDarkMode]\n  );\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Box component='main' padding={2} display='flex'>\n        <Grid container direction='column' justifyContent='center' alignItems='center' spacing={2}>\n          <Grid item>\n            <Typography variant='h1'>Manga Search</Typography>\n          </Grid>\n\n          <Grid item>\n            <TextField\n            multiline inputProps={{ style: { color: \"black\" } }}\n              label=\"Search Manga\"\n              variant=\"outlined\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n            <Button onClick={handleSearch} variant=\"contained\" color=\"primary\" style={{ marginTop: '10px' }}>\n              Search\n            </Button>\n          </Grid>\n\n          {/* Show manga search results */}\n          <Grid item>\n            {showResults && mangaResults.length > 0 ? (\n              <div>\n                <Typography variant='h2'>Search Results:</Typography>\n                {mangaResults.map((manga, index) => (\n                  <div key={index}>\n                        {manga.image ? (\n                          <img src={manga.image} style={{ width: '200px' }} />\n                        ) : (\n                          <Typography variant=\"body1\">Image not available</Typography>\n                         )}\n                    <Typography variant='body1'>\n                      <Button onClick={() =>  {console.log(mangaResults); handleMangaSelection(manga.link)}} variant='contained' color='secondary' style={{ marginLeft: '10px' }}>\n                        Select\n                      </Button>\n                    </Typography>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <Typography variant='body1'>No manga found</Typography>\n            )}\n          </Grid>\n\n          {/* Show selected manga's chapter information */}\n          <Grid item>\n            {selectedManga && chapterInfo.length > 0 ? (\n              <div>\n                <Typography variant='h2'>Chapters:</Typography>\n                {chapterInfo.map((chapter, index) => (\n                  <Typography key={index} variant='body1'>\n                    {chapter.chapterInfo} - <a href={`https://mangafire.to${chapter.chapterLink}`} target=\"_blank\" rel=\"noopener noreferrer\">Read</a>\n                  </Typography>\n                ))}\n              </div>\n            ) : selectedManga ? (\n              <Typography variant='body1'>No chapters found for the selected manga</Typography>\n            ) : null}\n          </Grid>\n\n          {/* Show error if any */}\n          {error && (\n            <Grid item>\n              <Typography color=\"error\">{error}</Typography>\n            </Grid>\n          )}\n        </Grid>\n      </Box>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}