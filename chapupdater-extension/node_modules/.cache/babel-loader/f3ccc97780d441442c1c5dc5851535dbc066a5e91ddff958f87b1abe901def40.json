{"ast":null,"code":"import{Button,createTheme,Grid,ThemeProvider,Typography,Box,TextField}from'@material-ui/core';import useMediaQuery from'@material-ui/core/useMediaQuery';import{useMemo,useState}from'react';import'./App.css';// Define the shape of the manga and chapter data\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const prefersDarkMode=useMediaQuery('(prefers-color-scheme: dark)');console.log(prefersDarkMode);const[searchQuery,setSearchQuery]=useState('');// Input for manga search\nconst[mangaResults,setMangaResults]=useState([]);// List of manga search results\nconst[selectedManga,setSelectedManga]=useState(null);// Selected manga URL\nconst[chapterInfo,setChapterInfo]=useState([]);// Fetched chapter info\nconst[error,setError]=useState(null);const[showResults,setShowResults]=useState(true);// State to control visibility of results\n// Handle manga search\nconst handleSearch=()=>{if(searchQuery){fetch(\"http://localhost:8000/search\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({mangaName:searchQuery})}).then(res=>res.json()).then(data=>{setShowResults(true);setMangaResults(data.results||[]);// Assuming the backend returns an array of search results\nsetError(null);}).catch(err=>{console.error(\"Error searching for manga:\",err);setError(\"Failed to search for manga.\");});}};// Handle manga selection and chapter scraping\nconst handleMangaSelection=link=>{const fullUrl=`https://mangafire.to${link}`;setSelectedManga(fullUrl);//console.log(url);\nfetch(\"http://localhost:8000/message\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({mangaUrl:fullUrl})// Send the selected manga URL to scrape chapters\n}).then(res=>res.json()).then(data=>{setShowResults(false);setChapterInfo(data.message||[]);}).catch(err=>{console.error(\"Error fetching chapters:\",err);setError(\"Failed to fetch chapters.\");});};// Theme setup for dark and light modes\nconst theme=useMemo(()=>createTheme({palette:{type:prefersDarkMode?'dark':'light'},typography:{h1:{fontSize:16,fontWeight:400},body1:{fontFamily:'monospace',fontSize:18}}}),[prefersDarkMode]);return/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsxs(Box,{component:\"main\",padding:2,display:\"flex\",children:[\" \",/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",justifyContent:\"center\",alignItems:\"center\",spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Manga Search\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(TextField,{label:\"Search Manga\",variant:\"outlined\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(Button,{onClick:handleSearch,variant:\"contained\",color:\"primary\",style:{marginTop:'10px'},children:\"Search\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,children:showResults&&mangaResults.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Search Results:\"}),mangaResults.map((manga,index)=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[manga.image?/*#__PURE__*/_jsx(\"img\",{src:manga.image,alt:manga.title,style:{width:'200px'}}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Image not available\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:\"container\",children:/*#__PURE__*/_jsx(Button,{className:\"button\",onClick:()=>{handleMangaSelection(manga.link);},variant:\"contained\",color:\"secondary\",style:{marginLeft:'10px'},children:manga.title})})]},index)}))]}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No manga found\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:!showResults&&selectedManga&&chapterInfo.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Chapters:\"}),chapterInfo.map((chapter,index)=>/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[chapter.chapterInfo,\" - \",/*#__PURE__*/_jsx(\"a\",{href:`https://mangafire.to${chapter.chapterLink}`,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Read\"})]},index))]}):selectedManga?/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No chapters found for the selected manga\"}):null}),error&&/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})})]})]})});}export default App;","map":{"version":3,"names":["Button","createTheme","Grid","ThemeProvider","Typography","Box","TextField","useMediaQuery","useMemo","useState","jsx","_jsx","jsxs","_jsxs","App","prefersDarkMode","console","log","searchQuery","setSearchQuery","mangaResults","setMangaResults","selectedManga","setSelectedManga","chapterInfo","setChapterInfo","error","setError","showResults","setShowResults","handleSearch","fetch","method","headers","body","JSON","stringify","mangaName","then","res","json","data","results","catch","err","handleMangaSelection","link","fullUrl","mangaUrl","message","theme","palette","type","typography","h1","fontSize","fontWeight","body1","fontFamily","children","component","padding","display","container","direction","justifyContent","alignItems","spacing","item","variant","label","value","onChange","e","target","onClick","color","style","marginTop","length","map","manga","index","className","image","src","alt","title","width","marginLeft","chapter","href","chapterLink","rel"],"sources":["C:/Users/Iliya/Desktop/Projects/React-Chapter-Updater/chapupdater-extension/src/App.tsx"],"sourcesContent":["import { Button, createTheme, Grid, ThemeProvider, Typography, Box, TextField } from '@material-ui/core';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useMemo, useState, useEffect } from 'react';\nimport './App.css';\nimport image from \"./backgroundImage.jpg\";\n\n// Define the shape of the manga and chapter data\ninterface Manga {\n  image: string;\n  link: string;\n  title: string;\n}\n\ninterface Chapter {\n  chapterInfo: string;\n  chapterLink: string;\n}\n\nfunction App() {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  console.log(prefersDarkMode);\n  const [searchQuery, setSearchQuery] = useState<string>(''); // Input for manga search\n  const [mangaResults, setMangaResults] = useState<Manga[]>([]); // List of manga search results\n  const [selectedManga, setSelectedManga] = useState<string | null>(null); // Selected manga URL\n  const [chapterInfo, setChapterInfo] = useState<Chapter[]>([]); // Fetched chapter info\n  const [error, setError] = useState<string | null>(null);\n  const [showResults, setShowResults] = useState(true); // State to control visibility of results\n\n  // Handle manga search\n  const handleSearch = () => {\n    if (searchQuery) {\n      fetch(\"http://localhost:8000/search\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ mangaName: searchQuery }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setShowResults(true);\n          setMangaResults(data.results || []); // Assuming the backend returns an array of search results\n          setError(null);\n        })\n        .catch((err) => {\n          console.error(\"Error searching for manga:\", err);\n          setError(\"Failed to search for manga.\");\n        });\n    }\n  };\n\n  // Handle manga selection and chapter scraping\n  const handleMangaSelection = (link:string) => {\n    const fullUrl = `https://mangafire.to${link}`;\n    setSelectedManga(fullUrl);\n    //console.log(url);\n    fetch(\"http://localhost:8000/message\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ mangaUrl: fullUrl }), // Send the selected manga URL to scrape chapters\n    })\n      .then((res) => res.json())\n      .then((data) =>  { setShowResults(false); setChapterInfo(data.message || [])  } )\n      .catch((err) => {\n        console.error(\"Error fetching chapters:\", err);\n        setError(\"Failed to fetch chapters.\");\n      });\n  };\n\n  // Theme setup for dark and light modes\n  const theme = useMemo(\n    () =>\n      createTheme({\n        palette: {\n          type: prefersDarkMode ? 'dark' : 'light',\n        },\n        typography: {\n          h1: {\n            fontSize: 16,\n            fontWeight: 400,\n          },\n          body1: {\n            fontFamily: 'monospace',\n            fontSize: 18,\n          },\n        },\n      }),\n    [prefersDarkMode]\n  );\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Box component='main' padding={2} display='flex'> {/*Need to work on background, maybe dont put it here */}\n        <Grid container direction='column' justifyContent='center' alignItems='center' spacing={2}>\n          <Grid item>\n            <Typography variant='body1'>Manga Search</Typography>\n          </Grid>\n\n          <Grid item>\n            <TextField\n              label=\"Search Manga\"\n              variant=\"outlined\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n            <Button onClick={handleSearch} variant=\"contained\" color=\"primary\" style={{ marginTop: '10px' }}>\n              Search\n            </Button>\n          </Grid>\n\n          {/* Show manga search results */}\n          <Grid item>\n            {showResults && mangaResults.length > 0 ? (\n              <div>\n                <Typography variant='h2'>Search Results:</Typography>\n                {mangaResults.map((manga, index) => (\n                  <div >\n                    <div className=\"container\" key={index} >\n                        {manga.image ? (\n                          <img src={manga.image} alt={manga.title} style={{ width: '200px' }} />\n                        ) : (\n                          <Typography variant=\"body1\">Image not available</Typography>\n                         )}\n                    <Typography variant='body1' className = \"container\">\n                      <Button className=\"button\" onClick={() =>  {handleMangaSelection(manga.link)}} variant='contained' color='secondary' style={{ marginLeft: '10px' }}>\n                        {manga.title}\n                      </Button>\n                    </Typography>\n                  </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <Typography variant='body1'>No manga found</Typography>\n            )}\n          </Grid>\n\n          {/* Show selected manga's chapter information */}\n          <Grid item>\n            {!showResults && selectedManga && chapterInfo.length > 0 ? (\n              <div>\n                <Typography variant='h2'>Chapters:</Typography>\n                {chapterInfo.map((chapter, index) => (\n                  <Typography key={index} variant='body1'>\n                    {chapter.chapterInfo} - <a href={`https://mangafire.to${chapter.chapterLink}`} target=\"_blank\" rel=\"noopener noreferrer\">Read</a>\n                  </Typography>\n                ))}\n              </div>\n            ) : selectedManga ? (\n              <Typography variant='body1'>No chapters found for the selected manga</Typography>\n            ) : null}\n          </Grid>\n\n          {/* Show error if any */}\n          {error && (\n            <Grid item>\n              <Typography color=\"error\">{error}</Typography>\n            </Grid>\n          )}\n        </Grid>\n      </Box>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}